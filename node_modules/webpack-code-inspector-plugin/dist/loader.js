"use strict";var d=(t,e,s)=>new Promise((p,i)=>{var u=r=>{try{n(s.next(r))}catch(o){i(o)}},f=r=>{try{n(s.throw(r))}catch(o){i(o)}},n=r=>r.done?p(r.value):Promise.resolve(r.value).then(u,f);n((s=s.apply(t,e)).next())});const c=require("code-inspector-core"),y=["isJsx","isTsx","lang.jsx","lang.tsx"];function S(t){return d(this,null,function*(){var o,h;this.cacheable&&this.cacheable(!0);const e=c.normalizePath(this.resourcePath);let s=new URLSearchParams(this.resource);const p=this.query,{escapeTags:i=[]}=p||{};if(c.isJsTypeFile(e)||e.endsWith(".vue")&&y.some(a=>s.get(a)!==null))return c.transformCode({content:t,filePath:e,fileType:"jsx",escapeTags:i});if(e.endsWith(".vue")&&(s.get("lang")==="tsx"||s.get("lang")==="jsx")){const{descriptor:a}=c.parseSFC(t,{sourceMap:!1}),x=[(o=a.script)==null?void 0:o.content,(h=a.scriptSetup)==null?void 0:h.content];for(const l of x){if(!l)continue;const g=c.transformCode({content:l,filePath:e,fileType:"jsx",escapeTags:i});t=t.replace(l,g)}return t}return e.endsWith(".vue")&&s.get("type")!=="style"&&s.get("type")!=="script"&&s.get("raw")===null?c.transformCode({content:t,filePath:e,fileType:"vue",escapeTags:i}):e.endsWith(".svelte")?c.transformCode({content:t,filePath:e,fileType:"svelte",escapeTags:i}):t})}module.exports=S;
