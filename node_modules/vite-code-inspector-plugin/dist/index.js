"use strict";var C=Object.defineProperty,h=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var V=(e,t,l)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,d=(e,t)=>{for(var l in t||(t={}))P.call(t,l)&&V(e,l,t[l]);if(m)for(var l of m(t))W.call(t,l)&&V(e,l,t[l]);return e},v=(e,t)=>h(e,x(t));var g=(e,t,l)=>new Promise((r,i)=>{var f=a=>{try{s(l.next(a))}catch(c){i(c)}},u=a=>{try{s(l.throw(a))}catch(c){i(c)}},s=a=>a.done?r(a.value):Promise.resolve(a.value).then(f,u);s((l=l.apply(e,t)).next())});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("code-inspector-core"),_="vite-code-inspector-plugin",M=["isJsx","isTsx","lang.jsx","lang.tsx"];function T(e){const t={port:0,entry:"",nextJsEntry:"",ssrEntry:""};return v(d({name:_},e.enforcePre===!1?{}:{enforce:"pre"}),{apply(r,{command:i}){if(e!=null&&e.close)return!1;let f;return typeof(e==null?void 0:e.dev)=="function"?f=e==null?void 0:e.dev():f=e==null?void 0:e.dev,f===!1?!1:!!f||i==="serve"},resolveId(r){return g(this,null,function*(){return t.port||(yield n.startServer(e,t)),r===n.ViteVirtualModule_EliminateVueWarning?"\0".concat(n.ViteVirtualModule_EliminateVueWarning):r===n.ViteVirtualModule_Client?"\0".concat(n.ViteVirtualModule_Client):null})},load(r){return r==="\0".concat(n.ViteVirtualModule_EliminateVueWarning)?n.getEliminateVueWarningCode():r==="\0".concat(n.ViteVirtualModule_Client)?n.getClientInjectCode(t.port,e):null},transform(r,i){return g(this,null,function*(){if(i.match("node_modules"))return r;r=yield n.getCodeWithWebComponent(e,i,r,t);const[f]=i.split("?",2),u=n.normalizePath(f),s=new URLSearchParams(i);if(e!=null&&e.match&&!e.match.test(u))return r;const{escapeTags:a=[]}=e||{};return n.isJsTypeFile(u)||u.endsWith(".vue")&&(M.some(y=>s.get(y)!==null)||s.get("lang")==="tsx"||s.get("lang")==="jsx")?n.transformCode({content:r,filePath:u,fileType:"jsx",escapeTags:a}):u.endsWith(".vue")&&s.get("type")!=="style"&&s.get("raw")===null?n.transformCode({content:r,filePath:u,fileType:"vue",escapeTags:a}):u.endsWith(".svelte")?n.transformCode({content:r,filePath:u,fileType:"svelte",escapeTags:a}):r})}})}exports.ViteCodeInspectorPlugin=T;
